<html>
<head>

	<title>Chat App</title>
</head>

<body ng-app="myApp" ng-controller='ChatCtrl'>
	<div class="box box-primary direct-chat direct-chat-primary">
		<div class="box-header with-border">
			<div ng-controller="logoutController">
				<button type="button" ng-click='logout()' class="btn btn-box-tool btn-default">Logout</button>

				<h3 class="box-title username">{{userName}}</h3>
			</div>

			<div class="box-tools pull-right">
				<div class="header_search">
					<input type="text" ng-model='filterText' placeholder="Search">
					<i class="fa fa-search"></i>
				</div>
			</div>
		</div>

		<div class="box-body">
			<div class="direct-chat-messages">
				<div class="direct-chat-msg" ng-repeat='text in messages | filter : filterText'>
					<div class="direct-chat-info clearfix">
						<span class="direct-chat-name">{{text.username}}</span>
						<span class="direct-chat-timestamp">22.12.2017 15:45</span>
					</div>

					<span class="direct-chat-img icon">
						<span>{{text.username}}</span>
					</span>


					<div class="direct-chat-text">
						{{text.message}}
					</div>
				</div>
			</div>
		</div>

		<div class="box-footer">
			<div class="input-group">
				<input type="text" class="form-control input-send" ng-enter='sendMessage()' ng-model='message' placeholder='Enter your message here'/>
					<span class="input-group-btn">
						<button type="button" class="btn btn-warning btn-flat send" ng-click='sendMessage()'>Send</button>
					</span>
			</div>
		</div>
	</div>

<script type='text/javascript' src='/socket.io/socket.io.js'></script>
<script type="text/javascript" src ="../client.js"></script>
<script>
	$(function() {
		$('.input-send').on('focus', function() {
			$(this).on('keypress', function(e) {
				if (e.keyCode == 13) {
					$('.send').click();
				}
			});
		});

		$(document).scrollTop($(document).height());
	})
</script>
</body>
</html>